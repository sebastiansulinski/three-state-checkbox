/*!
 * ssdThreeStateCheckbox (https://github.com/sebastiansulinski/three-state-checkbox)
 * Copyright 2015 Sebastian Sulinski. (https://github.com/sebastiansulinski)
 * Licensed under MIT (https://github.com/sebastiansulinski/three-state-checkbox/blob/master/LICENSE)
 */
!function(t){t.fn.ssdThreeStateCheck=function(a){"use strict";function e(t){return""===t||"undefined"==typeof t}function c(a){var e="[data-";e+=l.dataGroupButton,e+='="',e+=a,e+='"].',e+=l.classButton,t(e).each(function(){t(this).removeClass("disabled"),t(this).is(":input")&&t(this).prop("disabled",!1)})}function n(a){var e="[data-";e+=l.dataGroupButton,e+='="',e+=a,e+='"].',e+=l.classButton,t(e).each(function(){t(this).addClass("disabled"),t(this).is(":input")&&t(this).prop("disabled",!0)})}function r(t){var a=t.filter(":checked");return a.length===t.length}function o(t){var a=t.filter(":not(:checked)");return a.length===t.length}function d(a){return t("input[data-"+l.dataGroupMaster+'="'+a+'"].'+l.classMaster)}function s(a){return t("input[data-"+l.dataGroupRecord+'="'+a+'"].'+l.classRecord)}function i(a){return t("input:checked[data-"+l.dataGroupRecord+'="'+a+'"].'+l.classRecord)}function u(a){var e=t.Deferred(),c=i(a),n=[];return c.each(function(a){n.push(t(this).data(l.dataGroupRecordId)),parseInt(a+1,10)==c.length&&e.resolve(n)}),e.promise()}var l=t.extend({classButton:"checkboxButton",classMaster:"checkboxMaster",classRecord:"checkboxRecord",dataButtonUrl:"url",dataGroupButton:"group-button",dataGroupMaster:"group-master",dataGroupRecord:"group-record",dataGroupRecordId:"id",clickCallback:function(t){console.log("clickCallback method call : collected ["+t+"]")}},a);return this.each(function(){t(this).on("click","."+l.classMaster,function(){var a=t(this),e=a.data(l.dataGroupMaster),r=s(e);a.is(":checked")?(r.prop("checked",!0),c(e)):(r.prop("checked",!1),n(e))}),t(this).on("click","."+l.classRecord,function(){var a=t(this),e=a.data(l.dataGroupRecord),i=s(e),u=d(e);o(i)?(u.prop("indeterminate",!1),u.prop("checked",!1),n(e)):r(i)?(u.prop("indeterminate",!1),u.prop("checked",!0),c(e)):(u.prop("indeterminate",!0),c(e))}),t(this).on("click","."+l.classButton,function(a){if(a.preventDefault(),!t(this).hasClass("disabled")){var c=t(this),n=c.data(l.dataGroupButton),r=c.data(l.dataButtonUrl);e(r)||t.when(u(n)).done(function(t){l.clickCallback(t,c)})}})})}}(jQuery);